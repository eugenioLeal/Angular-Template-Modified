<script type="text/javascript">
  function callme(){
    var table = tableToJson($('#Envios-Tabla').get(0));
    var doc = new jsPDF('1','pt', 'letter', true);
  
    console.log(Envios-Tabla);
    doc.cellInitialize();
    $.each(table,function(i,row){
      $.each(row,function(j, cell){
        if(j == "Sucursal Inicial"){
          doc.cell(1,10,190,20,cell,i);
        }
        else{
          doc.cell(1,10,90,20,cell,i);
        }
      });
    });
  
    doc.save('test2.pdf');
  }
  
  function tableToJson(table){
    //first we need to be headers
    var headers = [];
    for( var i = 0; i <table.rows[0].cells.lenght;i++){
      headers[i] = table.rows[0].cells[i].innerHTML.toLowerCase().replace(/ /gi,'');
    }
    data.push(headers);
    for(var i = 1; i < table.rows.lenght; i++){
      var tableRow = table.rows[i];
      var rowData = {};
  
      for (var j = 0 ; j<tableRow.cells.lenght; j++){
        rowData[ headers[j] ] = tableRow.cells[j].innerHTML;
      }
      data.push(rowData);
    }
    return data;
  }
</script>
  
<card title="Facturas">
  <div class="table-responsive">
    <table class="table" id = "Facturas-Tabla">
      <thead class="thead-inverse">
      <tr>
        <th>#</th>
        <th>Precio</th>
        <th>Direccion destino</th>
        <th>Usuario destinatario</th>
        <th>Fecha</th>
      </tr>
      </thead>
      <tbody>
        <tr *ngFor="let factura of facturas">
          <th scope="row">{{factura._id}}</th>
          <th>{{factura.precio}}</th>
          <td>{{factura.direccion_dest}}</td>
          <td>{{factura.nombre_usuario_dest}}</td>
          <td>{{factura.fecha}}</td>
          <input type="button" (click)="deletFactura(factura._id)" value="Delete" class = "btn btn-danger">
        </tr>
      </tbody>
    </table>
  </div>
</card>
  
<div class="container">
  <h3 class = "page-header">Nueva Factura</h3>
  <form (submit) = "addFactura()">
    <div class = "form-group">
      <label>Precio</label>
      <input type="text"[(ngModel)] = "precio" name = "precio" class = "form-control">
    </div>
    <div class = "form-group">
      <label>Direccion destino</label>
      <input type="text"[(ngModel)] = "direccion_dest" name = "direccion_dest" class = "form-control">
    </div>
    <div class = "form-group">
      <label>Destinatario</label>
      <input type="text"[(ngModel)] = "nombre_usuario_dest" name = "nombre_usuario_dest" class = "form-control">
    </div>
    <div class = "form-group">
      <label>Fecha</label>
      <input type="date"[(ngModel)] = "fecha" name = "fecha" class = "form-control">
    </div>
    <input type="submit" class="btn btn btn-success" value = "Add">
  </form>
</div>
<hr>
  
  <script type="text/javascript" src="js/jquery-2.1.3.js"></script>
  <script type="text/javascript" src="js/jspdf.js"></script>